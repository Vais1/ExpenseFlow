services:
  # --------------------------------------------------------------------------------
  # BACKEND SERVICE (ASP.NET Core)
  # --------------------------------------------------------------------------------
  - type: web
    name: expenseflow-api
    env: docker
    region: sgp # Singapore
    plan: free
    dockerContext: backend
    dockerfilePath: backend/Dockerfile
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: ASPNETCORE_URLS
        value: http://+:8080
      - key: DATABASE_URL
        sync: false
      - key: JwtSettings__SecretKey
        sync: false
      - key: ALLOWED_ORIGINS
        sync: false 

  # --------------------------------------------------------------------------------
  # FRONTEND SERVICE (Next.js)
  # --------------------------------------------------------------------------------
  - type: web
    name: expenseflow-web
    env: docker
    region: sgp
    plan: free
    dockerContext: frontend
    dockerfilePath: frontend/Dockerfile
    envVars:
      - key: NEXT_PUBLIC_API_URL
        sync: false 
